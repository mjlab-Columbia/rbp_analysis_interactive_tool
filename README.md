# RBP Analysis Interactive Tool

## Getting Started

### Downloading the Code

Clone the repository via the following command:

```bash
git clone https://github.com/mjlab-Columbia/rbp_analysis_interactive_tool.git
```

Navigate to the `rbp_analysis_interactive_tool` directory. If you're on MacOS or Linux, enter the following into the terminal:

```bash
cd rbp_analysis_interactive_tool
```

### Installing Dependencies via Conda/Mamba

You can download the dependencies via the conda environment in `environment.yaml`. This method is recommended because it will install Java (via `openjdk`) which is necessary for clusetering with the clusterONE program. Specifically, run the following:

```bash
conda env create -f environment.yaml
```

If you have `mamba` installed you can run the following for faster installation (the output is identical to the command above):

```bash
mamba env create -f environment.yaml
```

Activate the environment with the following command:

```bash
conda activate rbp_analysis_interactive_tool
```

### Installing Dependencies via Pip

If you don't have `conda` or `mamba` installed, but you do have `openjdk` installed, you can install the remaining dependencies via pip. To do so, run the following command to install the dependencies:

```bash
pip install -r requirements.txt
```

This method may overwrite previously installed versions of packages. To avoid these conflicts, the `conda`/`mamba` method is preferred. Furthermore, this method _does not_ install Java so you will need to install it on your own, use the `conda`/`mamba` method, or avoid use of the `clusterONE` option in the clustering menu.

### Running the Tool

Once you have the dependencies installed, run the application. If you installed the dependencies via `conda`, activate your environment first:

```bash
conda activate rbp_analysis_interactive_tool
```

Then execute the following command from within `rbp_analysis_interactive_tool`:

```bash
bokeh serve app.py
```

If you used pip to install dependencies, you don't need to activate the conda environment and you can run the following command by itself:

```bash
bokeh serve app.py
```


## Operating System (OS) Compatibility

This software has been tested end-to-end on the following operating systems and architectures:

| OS Name | Architecture | OS Abbreviation |
|---------|--------------|-----------------|
| MacOS (Version 15.0)  | ARM  | `osx-arm64` |
| MacOS (Version 14.5)  | x86  | `osx-x86_64` |

## Using the Interactive Viewer

Below are descriptions of the various buttons, toggles, and sliders on the viewer:

- Source: select IP-MS data, SEC-MS data, or both, if nothing is selected both will be used
- Interaction support: 
	- IP+SEC: interactions found in IP-MS and SEC-MS
	- CORUM: interactions found in the CORUM interaction database
	- Direct: direct IP-MS interactions
	- RNA mediated: RNA-mediated IP-MS interactions
	- RNA shielded: RNA-shielded IP-MS interactions
- Protein: search for a specific protein of interest (proteins are listed by their gene names). Use a comma-separated list to search for multiple proteins
- Number of neighbors: how many degrees of separation from the searched proteins should be visualized
- Clustering method: choose a clustering method, options are Louvain, Markov, and clusterOne
- Clustering resolution: how large or small should the clusters be that are generated by the clustering method
- Color node by: how should nodes be colored, options are life-cycle stage, location annotation (from Human Protein Atlas), and disease annotations (from DisGenNet) 
- Labels: should gene names be displayed on the network
- Create Interactome: needs to be clicked any time selections are changed to create the updated network
- Download: download the interactome table for the currently visualized network


## Citation

```bibtex
@article{Street2024,
    title = {Large-scale map of RNA-binding protein interactomes across the mRNA life cycle},
    journal = {Molecular Cell},
    year = {2024},
    issn = {1097-2765},
    doi = {https://doi.org/10.1016/j.molcel.2024.08.030},
    url = {https://www.sciencedirect.com/science/article/pii/S1097276524007263},
    author = {Lena A. Street and Katherine L. Rothamel and Kristopher W. Brannan and Wenhao Jin and Benjamin J. Bokor and Kevin Dong and Kevin Rhine and Assael Madrigal and Norah Al-Azzam and Jenny Kim Kim and Yanzhe Ma and Darvesh Gorhe and Ahmed Abdou and Erica Wolin and Orel Mizrahi and Joshua Ahdout and Mayuresh Mujumdar and Ella Doron-Mandel and Marko Jovanovic and Gene W. Yeo},
    keywords = {RNA-binding proteins, protein-protein interactions, interactome, RNA-dependent protein interactions, SNRNP200, ERH, IP-MS, SEC-MS, RBP, mRNA life-cycle},
}
```

## Contact

If you encounter issues using the tool, please file an Issue on this repository with the following information:

- A brief description of your problem
- Any steps you have taken to solve the problem
- Some specifications about your computer
    - Operating system, including the version number
    - Architecture (x86 or ARM)
    - Any dependencies you have installed
- Any error output that you receive when running the program.

You can also reach out directly to dsg2157@columbia.edu. However, writing a GitHub issue is preferred so that others may learn/contribute.
